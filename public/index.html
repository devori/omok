<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="./lib/cocos2d-js-v3.10/cocos2d-js-v3.10.js" charset="UTF-8"></script>
</head>
<body>
    <canvas id="gameCanvas" width="800" height="800"></canvas>
    <script type="text/javascript">
        window.onload = function(){
            cc.game.onStart = function(){
                //load resources
                var MyScene = cc.Scene.extend({
                    onEnter:function () {
                        this._super();
                        var size = cc.director.getWinSize();
                        var board = cc.Sprite.create("./images/go_board.png");
                        board.setPosition(size.width / 2, size.height / 2);
                        board.setScale(0.4);
                        this.addChild(board, 0);

                        var scene = this;
                        var listener = cc.EventListener.create({
                            event : cc.EventListener.CUSTOM,
                            eventName: "onStone",
                            callback: function (evt) {

                                var sprite;
                                var userData = evt.getUserData();
                                var type = userData.type, x = userData.x, y = userData.y;
                                if (type === "BLACK") {
                                    sprite = cc.Sprite.create("./images/black_stone.png");
                                } else {
                                    sprite = cc.Sprite.create("./images/white_stone.png");
                                }

                                var hCenter = size.width / 2;
                                var vCenter = size.height / 2;
                                var unitWidth = size.width/19.2;
                                var unitHeight = size.height/19.2;

                                sprite.setPosition(hCenter - ((9 - x) * unitWidth), vCenter - ((9 - y) * unitHeight));
                                sprite.setScale(0.08);
                                scene.addChild(sprite, 0);
                            }
                        });
                        cc.eventManager.addListener(listener, 1);
                    }
                });

                cc.director.runScene(new MyScene());
            };
            cc.game.run("gameCanvas");
        };
    </script>
</body>
</html>